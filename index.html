<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤§è‡ªåœ¨ç‹ä½›è®šé Œèˆ‡å…­å¤§å¿ƒæ³•</title>
    <style>
        :root {
            --gold: #d4af37;
            --bg-color: #1a1a1a;
            --card-bg: #2d2d2d;
            --text-color: #e0e0e0;
            --btn-back-bg: #546e7a;
            --visited-color: #2e7d32; 
        }

        body.light-mode {
            --bg-color: #fff9e6; 
            --card-bg: #fdf2d0;
            --text-color: #001f3f; 
            --gold: #b8860b;
            --btn-back-bg: #a1b0b8;
            --visited-color: #8da38e; 
        }

        * { box-sizing: border-box; transition: background-color 0.3s, color 0.3s; }
        body {
            font-family: "Microsoft JhengHei", "PingFang TC", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        header {
            text-align: center;
            padding: 35px 15px;
            border-bottom: 2px solid var(--gold);
            width: 100%;
            max-width: 800px;
        }
        h1 { font-size: 1.4rem; color: var(--gold); letter-spacing: 2px; margin: 0 0 10px 0; line-height: 1.3; }
        .subtitle { font-size: 1.1rem; color: #aaa; margin: 0; }
        
        .menu-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            padding: 20px;
            width: 100%;
            max-width: 800px;
        }
        @media (min-width: 480px) {
            .menu-grid { grid-template-columns: 1fr 1fr; }
            h1 { font-size: 1.8rem; }
        }

        .menu-item {
            background: var(--card-bg);
            border: 1px solid #444;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            border-radius: 10px;
            font-size: 1.1rem;
            color: var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 65px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.2);
        }

        .menu-item.visited {
            background-color: var(--visited-color);
            color: white;
            border-color: transparent;
        }

        #content-page {
            display: none;
            width: 100%;
            max-width: 800px;
            padding: 20px 15px;
        }
        .content-body {
            background: var(--card-bg);
            padding: 25px;
            line-height: 1.9;
            border-radius: 12px;
            white-space: pre-wrap;
            font-size: 1.1rem;
            word-wrap: break-word;
            margin-bottom: 20px;
            border-left: 4px solid var(--gold);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            width: 100%;
            min-height: 50px;
        }
        .controls button {
            flex: 1; 
            max-width: 180px;
            padding: 12px 0;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: bold;
        }
        .btn-play { background-color: #2e7d32; color: white; }
        .btn-stop { background-color: #c62828; color: white; }

        .btn-back { 
            background-color: var(--btn-back-bg); 
            color: white; 
            width: 100%; 
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
        }

        .bottom-btn {
            position: fixed;
            bottom: 25px;
            width: 55px;
            height: 55px;
            background-color: var(--gold);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            z-index: 1000;
        }
        .theme-toggle { right: 25px; }
        .quote-toggle { left: 25px; }

        #quote-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        .modal-box {
            background: var(--card-bg);
            color: var(--text-color);
            padding: 30px;
            border-radius: 15px;
            max-width: 90%;
            width: 400px;
            border: 2px solid var(--gold);
            white-space: pre-wrap;
            line-height: 1.8;
            position: relative;
        }
        .modal-close {
            margin-top: 20px;
            width: 100%;
            padding: 10px;
            background: var(--gold);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        footer { 
            margin-top: auto; 
            padding: 25px; 
            font-size: 0.85rem; 
            opacity: 0.8; 
            text-align: center; 
            color: var(--gold); 
            width: 100%;
        }
        .version { display: block; margin-top: 5px; font-size: 0.75rem; color: #888; }
    </style>
</head>
<body>

    <div id="themeToggle" class="bottom-btn theme-toggle" onclick="toggleTheme()">ğŸ’¡</div>
    <div class="bottom-btn quote-toggle" onclick="toggleQuote(true)">ğŸ¯</div>

    <div id="quote-modal" onclick="toggleQuote(false)">
        <div class="modal-box" onclick="event.stopPropagation()">
            <strong style="color:var(--gold)">ç·£é“ç¥–å¸«ï¼š</strong>
ä»¥ç„¡å¿µä¹‹å¿µï¼Œå¿µå¿µä¸é›¢çœ¾ç”Ÿã€‚
ä½ç„¡ç›¸ä¹‹ç›¸ï¼Œæ³•æ³•ä¸é›¢è‡ªæ€§ã€‚

<strong style="color:var(--gold)">å°å¸«ï¼š</strong>
å‹¿ç¹«å¡µå‹ï¼Œç²¾é€²æ­¡å–œã€‚
ç¯¤è¡Œé–€è¦ï¼Œä½›é“è‡ªæˆã€‚
            <button class="modal-close" onclick="toggleQuote(false)">é—œé–‰</button>
        </div>
    </div>

    <div id="home-page" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
        <header>
            <h1>å¤§è‡ªåœ¨ç‹ä½›è®šé Œèˆ‡å…­å¤§å¿ƒæ³•</h1>
            <p class="subtitle">ä½›ä¹˜å®—æ³•è¦åº</p>
        </header>
        <div class="menu-grid">
            <div id="btn-king" class="menu-item" onclick="showPage('king', this)">å¤§è‡ªåœ¨ç‹ä½›è®šé Œ</div>
            <div id="btn-nine" class="menu-item" onclick="showPage('nine', this)">ä¹å­—ç¦ª</div>
            <div id="btn-tenOne" class="menu-item" onclick="showPage('tenOne', this)">åå¤§ä¸€å¦‚</div>
            <div id="btn-tenHeart" class="menu-item" onclick="showPage('tenHeart', this)">åç„¡é‡ç›¸æ‡‰å¿ƒå“</div>
            <div id="btn-fiveTreasures" class="menu-item" onclick="showPage('fiveTreasures', this)">çšˆä¾äº”å¯¶</div>
            <div id="btn-repentance" class="menu-item" onclick="showPage('repentance', this)">ç¦®ä½›æ‹œæ‡º</div>
            <div id="btn-rules" class="menu-item" onclick="showPage('rules', this)">é–€è¦èˆ‡å¯†å›‘</div>
            <div id="btn-preface" class="menu-item" onclick="showPage('preface', this)">ä½›ä¹˜å®—æ³•è¦åº</div>
        </div>
        <footer>
            ç¦æ…§å¢é•· æ—©è­‰è©æ
            <span class="version">Version 1.1.3</span>
        </footer>
    </div>

    <div id="content-page">
        <h2 id="page-title-display" style="color: var(--gold); text-align: center; font-size: 1.4rem; margin-top: 5px;"></h2>
        <div class="controls">
            <button id="playBtn" class="btn-play" onclick="handlePlay()">â–¶ æ’­æ”¾</button>
            <button id="stopBtn" class="btn-stop" onclick="stop()">â¹ åœæ­¢</button>
        </div>
        <div id="page-content" class="content-body"></div>
        <button class="btn-back" onclick="goHome()">å›é¦–é </button>
        <footer style="position: static;">
            ç¦æ…§å¢é•· æ—©è­‰è©æ
            <span class="version">Version 1.1.3</span>
        </footer>
    </div>

    <script>
        const data = {
            king: { title: "å¤§è‡ªåœ¨ç‹ä½›è®šé Œ", content: "ã€å¤§è‡ªåœ¨ç‹ä½›è®šé Œã€‘\nå¤§è‡ªåœ¨ç‹ä½›ç‚ºçœ¾ç”Ÿä½›æ€§ä¹‹æœ¬å…ƒï¼Œè«¸ä½›æ³•èº«ä¹‹ç¸½ç†é«”ï¼Œçµ±ç‰©ç†ç•Œã€ç²¾ç¥ç•Œä¹‹ä¸€å¦‚ã€‚æ³•ç•Œè¬æœ‰çš†ç”±ä¹‹è®Šæ˜“ç”ŸåŒ–è€Œç„¶ï¼Œå…¶èº«å¿ƒé«”ã€ç›¸ã€æ™ºã€å¾·ã€ç†ã€äº‹ã€èƒ½ã€ç”¨ã€æ™‚ã€ç©ºä¹‹åå¤§ä¸€å¦‚ï¼Œèˆ‡æ³•ç•ŒåŒä¸€ç†é‡ã€‚" },
            nine: { title: "ä¹å­—ç¦ª", content: "ã€ä¹å­—ç¦ªã€‘\nå—ç„¡ï¼šè¯è­¯æ­¸å‘½ã€æ•¬ç¦®ã€æ­¸ä¾ã€æ•‘æˆ‘ã€åº¦æˆ‘ç­‰ç¾©ï¼Œæ˜¯çœ¾ç”Ÿå‘ä½›è‡³å¿ƒçšˆä¾ä¿¡é †çš„è©±ã€‚\næœ¬å¸«ï¼šæœ¬æ€§ï¼Œå³è‡ªæ€§ï¼Œå³ä½›æ€§ï¼Œå³æ³•æ€§ã€‚æ³•æ€§å°±æ˜¯è«¸ä½›æ³•èº«ä¹‹ç¸½ç†é«”ï¼Œçœ¾ç”Ÿä½›æ€§ä¹‹æœ¬å…ƒï¼Œå³ å¤§è‡ªåœ¨ç‹ä½›ï¼Œæ•…ç¨±æœ¬å¸«ã€‚\nå¤§ï¼šé«”ã€ç›¸ã€æ™ºã€å¾·ã€ç†ã€äº‹ã€èƒ½ã€ç”¨ã€æ™‚ã€ç©ºï¼Œèˆ‡æ³•ç•ŒåŒä¸€ç†é‡ã€‚æ•…åå¤§ã€‚\nè‡ªåœ¨ï¼šè¬æ³•æ‹˜æŸä¸å¾—ï¼Œåœ“èç²¾ç¥èˆ‡ç‰©è³ªä¸–ç•Œï¼Œæ•…ç„¡ç¤™è§£è„«è‡ªåœ¨ï¼Œè‡ªè­‰å¸¸æ¨‚æˆ‘æ·¨ä¹‹å¢ƒç•Œã€‚\nç‹ï¼šä¸€åˆ‡ä½›ä¹‹è‡ªæ€§æ³•èº«ï¼Œä¸å‡ä»–ä¿®ï¼Œè€Œæœ¬æ€§å…·è¶³è¬æ³•èˆ‡æ³•ç•ŒåŒç†åŒé‡ã€‚\nä½›ï¼šè­‰æ‚Ÿæ³•ç•Œè¬æœ‰ä¸€åˆ‡äº‹ç†å¯¦ç›¸ï¼Œè‡ªè¦ºè¦ºä»–ï¼Œè¦ºè¡Œåœ“æ»¿ï¼Œè¬å¾·èŠåš´ä¹‹è–è€…ã€‚" },
            tenOne: { title: "åå¤§ä¸€å¦‚", content: "ã€åå¤§ä¸€å¦‚ã€‘\né«”å¤§ï¼šå¿ƒç‰©ä¸€å¦‚ã€‚ç›¸å¤§ï¼šè‡ªä»–ä¸€å¦‚ã€‚æ™ºå¤§ï¼šç†äº‹ä¸€å¦‚ã€‚å¾·å¤§ï¼šæ…ˆæ‚²ä¸€å¦‚ã€‚ç†å¤§ï¼šè¬æ³•ä¸€å¦‚ã€‚äº‹å¤§ï¼šç¦æ…§ä¸€å¦‚ã€‚èƒ½å¤§ï¼šè³ªèƒ½ä¸€å¦‚ã€‚ç”¨å¤§ï¼šé¡¯éš±ä¸€å¦‚ã€‚æ™‚å¤§ï¼šä¸‰ä¸–ä¸€å¦‚ã€‚ç©ºå¤§ï¼šå¤§å°ä¸€å¦‚ã€‚" },
            tenHeart: { title: "åç„¡é‡ç›¸æ‡‰å¿ƒå“", content: "ã€åç„¡é‡ç›¸æ‡‰å¿ƒå“ã€‘\nä¸€ã€æ…ˆæ‚²å¿ƒï¼šå¤§æ…ˆå¤§æ‚²åº¦çœ¾ç”Ÿï¼Œæ‹”è‹¦èˆ‡æ¨‚è©è–©è¡Œã€‚\näºŒã€å¹³ç­‰å¿ƒï¼šçœ¾ç”Ÿä½›æ€§æœ¬å¹³ç­‰ï¼Œä¸‰ä¸–åæ–¹ä¸€å¿ƒåœ“ã€‚\nä¸‰ã€æ¨é›¢å¿ƒï¼šæ¨é›¢ä¸‰ç•Œè²ªç‹ç™¡ï¼Œé “å…¥è§£è„«è‡ªåœ¨é–€ã€‚\nå››ã€ç²¾é€²å¿ƒï¼šè¬æ³•å”¯å¿ƒå¸¸ç²¾é€²ï¼Œæ³•è¼ªå¸¸è½‰æ˜¯ä½›å¿ƒã€‚\näº”ã€æ­¡å–œå¿ƒï¼šå¾—å¤§è‡ªåœ¨å¿ƒæ­¡å–œï¼Œéš¨ç·£åº¦çœ¾æ¨‚ç„¡é‚Šã€‚\nå…­ã€è¬™å’Œå¿ƒï¼šå¿ƒåŒæ³•ç•Œçœ¾å’Œåˆï¼Œè¬æ³•åœ“é€šäººå¤©å¸«ã€‚\nä¸ƒã€å ±æ©å¿ƒï¼šä½›å¸«çˆ¶æ¯çœ¾ç”Ÿæ©ï¼Œé£²æ°´æ€æºéŠ˜å¿ƒç”°ã€‚\nå…«ã€æ³•å¿å¿ƒï¼šç„¡ç”Ÿæ³•å¿å…¥ä½›åœ°ï¼Œå…¨æ†‘æ­£é“ç ´é­”é—œã€‚\nä¹ã€ç„¡ç•å¿ƒï¼šç„¡ç¸›ç„¡è‘—çœŸè§£è„«ï¼Œè¬å¾·èŠåš´å¤§ç„¡ç•ã€‚\nåã€åœ“è¦ºå¿ƒï¼šåå¤§ä¸€å¦‚ç¦æ…§å…¨ï¼Œå¸¸æ¨‚æˆ‘æ·¨æ³•èº«åœ“ã€‚" },
            fiveTreasures: { 
                title: "çšˆä¾äº”å¯¶", 
                content: "ã€çšˆä¾äº”å¯¶ã€‘\nä½›ï¼šè­‰æ‚Ÿæ³•ç•Œè¬æœ‰ä¸€åˆ‡äº‹ç†å¯¦ç›¸ï¼Œè‡ªè¦ºè¦ºä»–ï¼Œè¦ºè¡Œåœ“æ»¿ï¼Œè¬å¾·èŠåš´ä¹‹è–è€…ã€‚\næ³•ï¼šå‡ºé›¢ä¸‰ç•Œè¼ªè¿´ï¼Œåœ“è­‰å¯¦ç›¸ï¼Œäº†è„«ç”Ÿæ­»ï¼Œå³ç”Ÿæˆä½›ä¹‹å¤§æ³•ã€‚\nåƒ§ï¼šå’Œåˆä¹‹ç¾©ï¼Œåƒ§åœ˜ã€è©è–©åƒ§ã€è–åƒ§ã€‚\nå¸«ï¼šå¯¦è­‰æ³•èº«ï¼Œæ“æœ‰æˆä½›ä¹‹æ³•ï¼ŒçœŸæ­£èƒ½å¸¶é ˜çœ¾ç”Ÿå‡ºé›¢ä¸‰ç•Œä¹‹å–„çŸ¥è­˜ã€‚\nè‡ªæ€§ï¼šå³ä½›æ€§ï¼Œå³æ³•æ€§ï¼Œå³æœ¬å¿ƒï¼Œå³æœ¬å¸«ï¼Œåœ“æ»¿äº”å¯¶å³å…·è¶³ã€‚" 
            },
            repentance: { 
                title: "ç¦®ä½›æ‹œæ‡ºæ–‡", 
                content: "ã€ç¦®ä½›æ‹œæ‡ºæ–‡ã€‘\nä¸€å¿ƒåœ“æ³•ç•Œï¼Œæ„Ÿæ‡‰éåæ–¹ï¼Œè¬¹ä»¥æˆ’å®šæ…§å¿ƒé¦™ï¼Œæ™®ä¾›é¤Šåæ–¹ä¸‰ä¸–è«¸ä½›è©è–©ã€‚\nå¼Ÿå­æ³•æ‚Ÿå¼µæ‚¦èªç„¡å§‹åŠ«ä¾†ï¼Œå› è²ªç‹ç™¡æ‰€é€ èº«èªæ„æƒ¡æ¥­ï¼Œä»Šæ·±è‡ªè¦ºæ‚Ÿï¼Œç½ªæ€§æœ¬ç©ºï¼Œè¶£å‘çœŸå¦‚ï¼Œç¥ˆæ±‚å¤§æ…ˆå¤§æ‚²å¨å¾·åŠ›åŠ æŒï¼Œä¸‰æ¥­é “æ·¨ï¼Œåœ“è­‰è©æï¼Œä¸¦ä»¥æ­¤åŠŸå¾·ï¼Œæ™®è¿´å‘åæ–¹çœ¾ç”Ÿï¼Œå¸¸æ¨‚æˆ‘æ·¨ï¼ŒåŒè­‰ä½›æœã€‚\nå—ç„¡æœ¬å¸«å¤§è‡ªåœ¨ç‹ä½›\nå—ç„¡æœ¬å¸«å¤§è‡ªåœ¨ç‹ä½›\nå—ç„¡æœ¬å¸«å¤§è‡ªåœ¨ç‹ä½›" 
            },
            rules: { title: "é–€è¦èˆ‡å¯†å›‘", content: "ã€é–€è¦ã€‘\nç¬¬ä¸€æ¢ï¼šå°Šå¸«é‡é“ï¼Œè­·æŒäº”å¯¶ã€‚\nç¬¬äºŒæ¢ï¼šæ…ˆæ‚²å¹³ç­‰ï¼Œæ™®åº¦çœ¾ç”Ÿã€‚\nç¬¬ä¸‰æ¢ï¼šè‡ªç«‹æ´»å‘½ï¼Œå¥‰ç»å…¬ç›Šã€‚\nç¬¬å››æ¢ï¼šéµè¡Œé–€è¦ï¼Œå…‰å¤§æœ¬é–€ã€‚\n\nã€å¯†å›‘ã€‘\nç¬¬ä¸€é …ï¼šæ¯æœˆå°‡æ”¶å…¥ä¸€éƒ¨åˆ†æç»ã€‚\nç¬¬äºŒé …ï¼šä¿®è¡Œå¯†æ³•ä¸å¾—è¶…å‚³ã€‚" },
            preface: { 
                title: "ä½›ä¹˜å®—æ³•è¦åº", 
                content: "ã€ä½›ä¹˜å®—æ³•è¦åºã€‘\n\nå®—å¸«ç·£é“ä¸Šäººç¾…é›·å±…å£«æ›¸æ–¼å°ç£\n\nä½›æ›†äºŒäº”ä¸‰ä¸‰å¹´ä½›èª•æ—¥\n\nä½›ä¹˜å®—ç‚ºé “å…¥å¤§è‡ªåœ¨å¯¦ç›¸ç†é«”ï¼Œåœ“è¨¼ä¸€å¿ƒï¼Œå³ç”Ÿè‚‰èº«æˆä½›ä¹‹åœ“é “æ³•é–€ï¼Œç”±ã€€ç¥–å¸«ä¸Šå¦™ä¸‹ç©ºç¦ªå¸«èˆ‡å‚³äººã€€å®—å¸«ç·£é“æ‰€ç«‹ï¼Œå°Šå¤§è‡ªåœ¨ç‹ä½›ç‚ºæœ¬é–€ç¬¬ä¸€ä»£ç¥–å¸«ã€‚ã€€å¤§è‡ªåœ¨ç‹ä½›ç‚ºçœ¾ç”Ÿä½›æ€§ä¹‹æœ¬å…ƒï¼Œè«¸ä½›æ³•èº«ä¹‹ç¸½ç†é«”ï¼Œçµ±ç‰©ç†ç•Œç²¾ç¥ç•Œä¹‹ä¸€å¦‚ï¼Œæ³•ç•Œè¬æœ‰çš†ç”±ä¹‹è®Šæ˜“ç”ŸåŒ–è€Œç„¶ï¼Œå…¶èº«å¿ƒé«”ã€ç›¸ã€æ™ºã€å¾·ã€ç†ã€äº‹ã€èƒ½ã€ç”¨ã€æ™‚ã€ç©ºä¹‹åå¤§ä¸€å¦‚ï¼Œèˆ‡æ³•ç•ŒåŒä¸€ç†é‡ã€‚è“‹å¿ƒç‰©éäºŒï¼Œç©ºæœ‰ä¸€å¦‚ï¼Œç‰©è³ªä¸æ»…æ•…èƒ½é‡ä¸æ»…ï¼Œç²¾ç¥äº¦ä¸æ»…ï¼›å¿ƒç‰©äº¤æ„Ÿï¼Œè³ªèƒ½äº’è®Šï¼Œå› ç·£æœå ±è®Šæ˜“ç”ŸåŒ–ä¹‹ç†äº‹ï¼Œä¸€æ³•ä¹‹ç”Ÿä¹ƒæ³•æ€§ä¹‹ä¸€å¤§ç·£èµ·ï¼Œæ•…å› è³…æœæµ·ä¸‰ç•Œå®‰ç«‹ï¼Œæœæ¾ˆå› ç·£ä¸‰ä¸–å¹³ç­‰ã€‚\n\næœ¬é–€ä¹‹æ³•ï¼Œåˆä¹‹ç‚ºä¸€ä½›å¿ƒï¼Œéèªè¨€æ–‡å­—ä¹‹å¯è©®è¿°ï¼Œæ–¹ä¾¿åˆ†ä¹‹ï¼Œå‰‡å¿ƒç†æœ‰å…«å¤§åŠ è¡Œï¼Œé›†ä½›æ•™å¤§å°ä¹˜å„å®—ç¾©ç†ä¹‹ç²¾è¯ï¼Œç‚ºå‡¡ä½è©è–©è‡³ä½›æœä¹‹ç†è·¯ï¼›ç”Ÿç†ä¹æ®µç¦ªåŠŸï¼Œç‚ºèƒ½æ²»ç™¾ç—…è‚‰èº«æˆä½›ä¹‹å¦™è¡Œã€‚çœ¾ç”Ÿè‡ªæ€§ä¹‹é«”ã€ç›¸ã€æ™ºã€å¾·ã€ç†ã€äº‹ã€èƒ½ã€ç”¨ã€æ™‚ã€ç©ºä¹‹åå¤§ï¼Œèˆ‡å¤§è‡ªåœ¨ç‹ä½›ä¹‹åå¤§ï¼Œæœ¬ç‚ºåŒä¸€ç†é‡ï¼Œç‚ºç„¡æ˜æƒ‘æ¥­æ‰€éšœæ•…ï¼Œè‡´æœªèƒ½é¡¯ç”¨ã€‚ã€€æœ‰ç·£ä¹‹äººå¦‚ä»¥ç›¸æ‡‰çœŸå¿ƒå¿µã€€å¤§è‡ªåœ¨ç‹ä½›ä¸€è²è–è™Ÿï¼Œå…¶åŠŸå¾·ç­‰æ–¼ä»¥ç„¡é‡åŠ«ä¹‹æ™‚é–“å¿µæ³•ç•Œç„¡é‡ä½›ä¹‹è–è™Ÿç›¸ç­‰ï¼Œæ•…ä¸€å¿ƒç›¸æ‡‰å³èƒ½é “æ¶ˆç„¡é‡åŠ«è‡ªèº«æ‰€é€ ä¹‹ç½ªæ¥­ã€‚\n\néš›æ­¤æœ«æ³•æ™‚æœŸï¼Œé­”å¼·é“è¡°ï¼Œæˆ‘ç¥–å¸«ç‚ºæ‡‰æ­¤ä¸€æ™‚ç¯€å› ç·£ï¼Œæ•…æ˜å®šä»¥ä½›æ•™ä¸–é–“åŒ–ï¼Œä½›å­¸ç§‘å­¸åŒ–ï¼Œä½›æ³•ç”Ÿæ´»åŒ–ï¼Œä½›åˆ¶ç¾ä»£åŒ–å››å¤§åŸå‰‡ï¼Œå°‡ä½›æ³•èˆ‡ä¸­è¯æ–‡åŒ–åŠç¾ä»£å€«ç†ã€æ°‘ä¸»ã€ç§‘å­¸ä¹‹ç†äº‹ç›¸èåˆï¼Œä»¥æ–¹ä¾¿å¼˜æ³•åˆ©ç”Ÿã€‚\n\nä¿®è¡Œç”¨åŠŸï¼Œé‡åœ¨ä¿¡å¿ƒå …å®šã€ç†äº‹åœ“èã€ç²¾é€²ä¸æ‡ˆã€è§£è¡Œç›¸æ‡‰ï¼Œå¦‚èƒ½èˆ‡ç¥–å¸«å¤§è‡ªåœ¨ç‹ä½›ä¸€å¿µç›¸æ‡‰ï¼Œå‰‡ç•¶ä¸‹æˆ’å®šæ…§å…·è¶³ï¼Œè²ªç‹ç—´ä¸‰æ¯’æ°¸æ·¨ï¼›æ¯æ—¥å»¿å…­æ™‚ä¸­ï¼Œè¡Œä½åè‡¥çš†å®‰ä½è‡ªæ€§å¤§è‡ªåœ¨ä½›ä½ä¸­ï¼Œç©¶ç«Ÿè§£è„«ï¼›ä¸€åˆ‡ç„¡æ˜æ¥­éšœï¼Œè‡ªæœƒéš¨ç·£ä¸è®Šï¼Œä¸è®Šéš¨ç·£è€Œå¾—å¤§è‡ªåœ¨ã€‚ä¾ä¹‹ä¿®è¡Œå®šå¯ç¦æ…§åœ“æ»¿ï¼Œåœ“è¨¼ä½›æœï¼Œè€Œä½œäººå¤©ä¹‹å¸«ï¼Œå¿ƒæ·¨ï¼Œå‰‡çœ¾ç”Ÿæ¥­æ·¨ï¼Œçœ¾ç”Ÿç•Œæ·¨ï¼Œç•¶ä¸‹åˆåæ³•ç•Œç‚ºä¸€å¤§è‡ªåœ¨ç‹ä½›é–‹å±±æ¥µæ¨‚æ·¨åœŸï¼Œå¸¸å¯‚å…‰ä¸­è‡ªä»–ä¸äºŒï¼Œç©ºæœ‰ä¸€å¦‚ï¼Œå¸¸æ¨‚æˆ‘æ·¨ï¼Œä¸€ç‚ºç„¡é‡ï¼Œç„¡é‡ç‚ºä¸€ï¼Œä¸€å¤šåœ“èï¼Œæ³•è¼ªå¸¸è½‰ï¼Œæ˜¯ä»¥è¬æ³•åœ“é€šï¼Œè¬å¾·èŠåš´ï¼Œæ­¤æ˜¯è©è–©è¡Œè™•ä½è™•ï¼Œè¬¹ç‚ºä¹‹åºã€‚" 
            }
        };

        const synth = window.speechSynthesis;
        let isLooping = false;
        let currentId = '';
        let isSecondRound = false;

        function toggleTheme() {
            const body = document.body;
            const btn = document.getElementById('themeToggle');
            body.classList.toggle('light-mode');
            btn.innerText = body.classList.contains('light-mode') ? 'ğŸ•¯' : 'ğŸ’¡';
        }

        function toggleQuote(show) {
            document.getElementById('quote-modal').style.display = show ? 'flex' : 'none';
        }

        function showPage(id, element) {
            currentId = id;
            isSecondRound = false;
            if (element) {
                element.classList.add('visited');
            }
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('content-page').style.display = 'block';
            document.getElementById('page-title-display').innerText = data[id].title;
            document.getElementById('page-content').innerText = data[id].content;
            window.scrollTo(0,0);
            stop(); 
        }

        function goHome() {
            stop();
            document.getElementById('home-page').style.display = 'flex';
            document.getElementById('content-page').style.display = 'none';
        }

        function handlePlay() {
            if (!synth.speaking) {
                startSpeaking(false);
            }
        }

        function startSpeaking(roundTwo) {
            synth.cancel(); 
            isLooping = true;
            isSecondRound = roundTwo;
            
            let originalText = data[currentId].content;

            if (currentId === 'repentance' && isSecondRound) {
                const lines = originalText.split('\n');
                if (lines[0].includes('ã€ç¦®ä½›æ‹œæ‡ºæ–‡ã€‘')) {
                    lines.shift();
                    originalText = lines.join('\n');
                }
            }

            // è®€éŸ³ä¿®æ­£é‚è¼¯
            let textToRead = originalText.replace(/ä½›ä¹˜å®—/g, "ä½›ç››å®—");
            if (currentId === 'preface') {
                textToRead = textToRead.replace(/å¯¦ç›¸/g, "å¯¦åƒ");
            }

            const utterance = new SpeechSynthesisUtterance(textToRead);
            utterance.lang = 'zh-TW';
            utterance.rate = 0.88; 
            
            utterance.onend = function() {
                if (isLooping) {
                    startSpeaking(true);
                }
            };

            synth.speak(utterance);
        }

        function stop() {
            isLooping = false;
            isSecondRound = false;
            synth.cancel(); 
        }

        // å¿ƒè·³æ©Ÿåˆ¶ä¿æŒèƒŒæ™¯æ´»èº
        setInterval(() => {
            if (synth.speaking) {
                window.speechSynthesis.pause();
                window.speechSynthesis.resume();
            }
        }, 8000);
    </script>
</body>
</html>
